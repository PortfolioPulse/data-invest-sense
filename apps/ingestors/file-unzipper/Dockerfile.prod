FROM scratch

ARG SERVICE_NAME
ARG CONTEXT_ENV
ARG MINIO_ENDPOINT
ARG MINIO_ACCESS_KEY
ARG MINIO_SECRET_KEY

ENV SERVICE_NAME=$SERVICE_NAME
ENV CONTEXT_ENV=$CONTEXT_ENV
ENV MINIO_ENDPOINT=$MINIO_ENDPOINT
ENV MINIO_ACCESS_KEY=$MINIO_ACCESS_KEY
ENV MINIO_SECRET_KEY=$MINIO_SECRET_KEY

WORKDIR /app

COPY dist/server .
COPY .env .

CMD ["./server"]
